<!DOCTYPE html>
<html>

<head>
    <title>/{{.Name}}/ - {{.Desc}}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="/resources/base.css">
    <link rel="stylesheet" href="/resources/default.css">
    <script async src="/resources/thread.js" defer></script>
<style>{{$name := .Name}}
{{if .Threads}}{{range .Threads}}{{range .Posts}}{{if.File}}
.p{{.Id}} {--mini: url('/{{$name}}/Files/{{.Imgprev}}'); --maxi: url('/{{$name}}/Files/{{.File}}');}{{end}}{{end}}{{end}}{{end}}
</style>
</head>
<body>{{$Descs := .HeaderDescs}}
<p class="headerblock">{{range $index, $name := .Header}}
    <a class="header" href="/{{$name}}" title="{{index $Descs $index}}">/{{$name}}/</a> {{end}}
    <a class="header" href="/" title="front page">home</a>
</p><br>

<center>
<img class="bannerimg" src="/resources/banners/cbanner.webp" height="100" width="300">
<p class="boardinfo">/{{.Name}}/ - {{.Desc}}</p></td>
</center>
<hr>

<a class="navi" href="/{{.Name}}/catalog.html">Catalog</a><br><br>
{{if .Threads}}{{range .Threads}}{{$sub:= .Subject}}{{$op:= .OmittedPosts}}{{$oi:= .OmittedImages}}{{if .Posts}}{{range slice .Posts 0 1}}
        <threadwrap>
            <div id="no{{.Id}}" class="thread">

                    <label>File <a href="Files/{{.File}}" download="{{.Filename}}">{{.Filename}}</a> - ({{.Fileinfo}})</label>
                    <br>
                    {{if avcheck .Filemime}}<video controls poster={{if eq .Imgprev "audio_image.webp"}}'/resources/audio_image.webp'{{else}}'/{{$name}}/Files/{{.Imgprev}}'{{end}}><source src='/{{$name}}/Files/{{.File}}' type= '{{.Filemime}}'></video>{{else}}<input type="checkbox" class="image imspec p{{.Id}}" autocomplete="off"/>{{end}}
                    <label class="{{.Option}}"><a href="{{.Parent}}.html"><subject>{{if $sub}}{{$sub}}{{else}}Reply{{end}}</subject></a> <time>{{.Time}}</time> <selfref><a href="/{{$name}}/{{.Parent}}.html#no{{.Id}}">No. </a><a class="plink" href="#newpost">{{.Id}}</a></selfref></label>
                    <div class="pcontent">{{.Content}}</div>
                    {{if gt $op 0}}<p class="omitted">{{$op}} posts and {{$oi}} images omitted.</p>{{end}}
            </div>
        </threadwrap>{{end}}
{{range slice .Posts 1}}
    <postwrap>
        <div id="no{{.Id}}" class="post">

                    <label class="{{.Option}}"><time>{{.Time}}</time> <selfref><a href="/{{$name}}/{{.Parent}}.html#no{{.Id}}">No. </a><a class="plink" href="#newpost"> {{.Id}}</a></selfref>{{if .Replies}}{{range .Replies}}<ref class="reply"><a href="#no{{.}}">&gt;&gt;{{.}}</a></ref>{{end}}{{end}}</label>
                    <br>
                    {{if .File}}<label>File <a href="Files/{{.File}}" download="{{.Filename}}">{{.Filename}}</a> - ({{.Fileinfo}})</label>
                    <br>
                    {{if avcheck .Filemime}}<video controls poster={{if eq .Imgprev "audio_image.webp"}}'/resources/audio_image.webp'{{else}}'/{{$name}}/Files/{{.Imgprev}}'{{end}}><source src='/{{$name}}/Files/{{.File}}' type= '{{.Filemime}}'></video>{{else}}<input type="checkbox" class="image imspec p{{.Id}}" autocomplete="off"/>{{end}}{{end}}
                    {{if .Content}}<div class="pcontent">{{.Content}}</div>{{end}}

        </div>
    </postwrap>
{{end}}{{end}}
<hr class="split">
{{end}}{{end}}
    <form action="/im/post/?board={{.Name}}" enctype="multipart/form-data" method="Post">
        <input name="subject" type="text" value=""><br>
        <textarea id="newpost" name="newpost" rows="8" cols="78">I'm putting the new post box at the bottom.</textarea>
        <br>
        <input type="file" name="file" accept="image/png, image/jpeg, image/gif, image/webp, image/avif,
            audio/mpeg, audio/ogg, audio/flac, video/webm, video/mp4, .opus, .m4a">
        <input type="submit" value="Submit">
    </form>

    <form class="thememenu" action="/im/theme/" method="Get">
        <select name="theme">
            <option value="default">Styles</option>
             <option value="default">default</option>{{range .SThemes}}
              <option value="{{.}}">{{.}}</option>{{end}}
        </select>
        <input type="submit" value="Select">
    </form>
</body>
</html>
